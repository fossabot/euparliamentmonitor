<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>generate-news-indexes.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module-MCP%2520Client%2520for%2520European%2520Parliament.EuropeanParliamentMCPClient.html">EuropeanParliamentMCPClient</a><ul class='methods'><li data-type='method'><a href="module-MCP%252520Client%252520for%252520European%252520Parliament.EuropeanParliamentMCPClient.html#_attemptConnection">_attemptConnection</a></li><li data-type='method'><a href="module-MCP%252520Client%252520for%252520European%252520Parliament.EuropeanParliamentMCPClient.html#callTool">callTool</a></li><li data-type='method'><a href="module-MCP%252520Client%252520for%252520European%252520Parliament.EuropeanParliamentMCPClient.html#connect">connect</a></li><li data-type='method'><a href="module-MCP%252520Client%252520for%252520European%252520Parliament.EuropeanParliamentMCPClient.html#disconnect">disconnect</a></li><li data-type='method'><a href="module-MCP%252520Client%252520for%252520European%252520Parliament.EuropeanParliamentMCPClient.html#getMEPs">getMEPs</a></li><li data-type='method'><a href="module-MCP%252520Client%252520for%252520European%252520Parliament.EuropeanParliamentMCPClient.html#getParliamentaryQuestions">getParliamentaryQuestions</a></li><li data-type='method'><a href="module-MCP%252520Client%252520for%252520European%252520Parliament.EuropeanParliamentMCPClient.html#getPlenarySessions">getPlenarySessions</a></li><li data-type='method'><a href="module-MCP%252520Client%252520for%252520European%252520Parliament.EuropeanParliamentMCPClient.html#handleMessage">handleMessage</a></li><li data-type='method'><a href="module-MCP%252520Client%252520for%252520European%252520Parliament.EuropeanParliamentMCPClient.html#listTools">listTools</a></li><li data-type='method'><a href="module-MCP%252520Client%252520for%252520European%252520Parliament.EuropeanParliamentMCPClient.html#searchDocuments">searchDocuments</a></li><li data-type='method'><a href="module-MCP%252520Client%252520for%252520European%252520Parliament.EuropeanParliamentMCPClient.html#sendRequest">sendRequest</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-Article%2520Template%2520Generator.html">Article Template Generator</a><ul class='methods'><li data-type='method'><a href="module-Article%252520Template%252520Generator.html#.generateArticleHTML">generateArticleHTML</a></li></ul></li><li><a href="module-Intelligence%2520Operations_Automated%2520News%2520Generation.html">Intelligence Operations/Automated News Generation</a><ul class='methods'><li data-type='method'><a href="module-Intelligence%252520Operations_Automated%252520News%252520Generation.html#~calculateReadTime">calculateReadTime</a></li><li data-type='method'><a href="module-Intelligence%252520Operations_Automated%252520News%252520Generation.html#~fetchEvents">fetchEvents</a></li><li data-type='method'><a href="module-Intelligence%252520Operations_Automated%252520News%252520Generation.html#~formatDateForSlug">formatDateForSlug</a></li><li data-type='method'><a href="module-Intelligence%252520Operations_Automated%252520News%252520Generation.html#~generateWeekAhead">generateWeekAhead</a></li><li data-type='method'><a href="module-Intelligence%252520Operations_Automated%252520News%252520Generation.html#~getWeekAheadDateRange">getWeekAheadDateRange</a></li><li data-type='method'><a href="module-Intelligence%252520Operations_Automated%252520News%252520Generation.html#~initializeMCPClient">initializeMCPClient</a></li><li data-type='method'><a href="module-Intelligence%252520Operations_Automated%252520News%252520Generation.html#~main">main</a></li><li data-type='method'><a href="module-Intelligence%252520Operations_Automated%252520News%252520Generation.html#~writeArticle">writeArticle</a></li><li data-type='method'><a href="module-Intelligence%252520Operations_Automated%252520News%252520Generation.html#~writeSingleArticle">writeSingleArticle</a></li></ul></li><li><a href="module-MCP%2520Client%2520for%2520European%2520Parliament.html">MCP Client for European Parliament</a></li><li><a href="module-News%2520Index%2520Generator.html">News Index Generator</a><ul class='methods'><li data-type='method'><a href="module-News%252520Index%252520Generator.html#~formatSlug">formatSlug</a></li><li data-type='method'><a href="module-News%252520Index%252520Generator.html#~generateIndexHTML">generateIndexHTML</a></li><li data-type='method'><a href="module-News%252520Index%252520Generator.html#~getNewsArticles">getNewsArticles</a></li><li data-type='method'><a href="module-News%252520Index%252520Generator.html#~groupArticlesByLanguage">groupArticlesByLanguage</a></li><li data-type='method'><a href="module-News%252520Index%252520Generator.html#~main">main</a></li><li data-type='method'><a href="module-News%252520Index%252520Generator.html#~parseArticleFilename">parseArticleFilename</a></li></ul></li><li><a href="module-Sitemap%2520Generator.html">Sitemap Generator</a><ul class='methods'><li data-type='method'><a href="module-Sitemap%252520Generator.html#~generateSitemap">generateSitemap</a></li><li data-type='method'><a href="module-Sitemap%252520Generator.html#~getModifiedDate">getModifiedDate</a></li><li data-type='method'><a href="module-Sitemap%252520Generator.html#~getNewsArticles">getNewsArticles</a></li><li data-type='method'><a href="module-Sitemap%252520Generator.html#~main">main</a></li></ul></li><li><a href="module-scripts_copy-test-reports.html">scripts/copy-test-reports</a><ul class='methods'><li data-type='method'><a href="module-scripts_copy-test-reports.html#~copyDirectory">copyDirectory</a></li><li data-type='method'><a href="module-scripts_copy-test-reports.html#~createTestResultsIndex">createTestResultsIndex</a></li><li data-type='method'><a href="module-scripts_copy-test-reports.html#~main">main</a></li></ul></li><li><a href="module-scripts_generate-docs-index.html">scripts/generate-docs-index</a><ul class='methods'><li data-type='method'><a href="module-scripts_generate-docs-index.html#~generateIndexHTML">generateIndexHTML</a></li><li data-type='method'><a href="module-scripts_generate-docs-index.html#~main">main</a></li></ul></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">generate-news-indexes.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>#!/usr/bin/env node

/**
 * @module News Index Generator
 * @description Generates index.html files for each language listing all news articles
 *
 * @author Hack23 AB
 * @license Apache-2.0
 */

import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const NEWS_DIR = path.join(__dirname, '..', 'news');
const ALL_LANGUAGES = [
  'en',
  'de',
  'fr',
  'es',
  'it',
  'nl',
  'pl',
  'pt',
  'ro',
  'sv',
  'da',
  'fi',
  'el',
  'hu',
];

/**
 * Get all news article files
 * @returns {Array&lt;string>} List of article filenames
 */
function getNewsArticles() {
  if (!fs.existsSync(NEWS_DIR)) {
    console.log('ðŸ“ News directory does not exist yet');
    return [];
  }

  const files = fs.readdirSync(NEWS_DIR);
  return files.filter((f) => f.endsWith('.html') &amp;&amp; !f.startsWith('index-'));
}

/**
 * Parse article filename to extract metadata
 * @param {string} filename - Article filename
 * @returns {object|null} Parsed metadata or null
 */
function parseArticleFilename(filename) {
  // Format: YYYY-MM-DD-slug-lang.html
  const match = filename.match(/^(\d{4}-\d{2}-\d{2})-(.+)-([a-z]{2})\.html$/);

  if (!match) {
    return null;
  }

  return {
    date: match[1],
    slug: match[2],
    lang: match[3],
    filename,
  };
}

/**
 * Group articles by language
 * @param {Array&lt;string>} articles - List of article filenames
 * @returns {object} Articles grouped by language code
 */
function groupArticlesByLanguage(articles) {
  const grouped = {};

  for (const lang of ALL_LANGUAGES) {
    grouped[lang] = [];
  }

  for (const article of articles) {
    const parsed = parseArticleFilename(article);
    if (parsed &amp;&amp; grouped[parsed.lang]) {
      grouped[parsed.lang].push(parsed);
    }
  }

  // Sort by date (newest first)
  for (const lang in grouped) {
    grouped[lang].sort((a, b) => b.date.localeCompare(a.date));
  }

  return grouped;
}

/**
 * Generate index HTML for a language
 * @param {string} lang - Language code
 * @param {Array&lt;object>} articles - Articles for this language
 * @returns {string} Complete HTML document
 */
function generateIndexHTML(lang, articles) {
  const langNames = {
    en: 'English',
    de: 'Deutsch',
    fr: 'FranÃ§ais',
    es: 'EspaÃ±ol',
    it: 'Italiano',
    nl: 'Nederlands',
    pl: 'Polski',
    pt: 'PortuguÃªs',
    ro: 'RomÃ¢nÄƒ',
    sv: 'Svenska',
    da: 'Dansk',
    fi: 'Suomi',
    el: 'Î•Î»Î»Î·Î½Î¹ÎºÎ¬',
    hu: 'Magyar',
  };

  const titles = {
    en: 'EU Parliament Monitor - News',
    de: 'EU-Parlamentsmonitor - Nachrichten',
    fr: 'Moniteur du Parlement UE - ActualitÃ©s',
    es: 'Monitor del Parlamento UE - Noticias',
    it: 'Monitor del Parlamento UE - Notizie',
    nl: 'EU Parlementsmonitor - Nieuws',
    pl: 'Monitor Parlamentu UE - WiadomoÅ›ci',
    pt: 'Monitor do Parlamento UE - NotÃ­cias',
    ro: 'Monitor al Parlamentului UE - È˜tiri',
    sv: 'EU-parlamentsmonitor - Nyheter',
    da: 'EU-parlamentsmonitor - Nyheder',
    fi: 'EU-parlamentin seuranta - Uutiset',
    el: 'Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· ÎšÎ¿Î¹Î½Î¿Î²Î¿Ï…Î»Î¯Î¿Ï… Î•Î• - ÎÎ­Î±',
    hu: 'EU Parlamenti FigyelÅ‘ - HÃ­rek',
  };

  const descriptions = {
    en: 'Latest news and analysis about European Parliament activities',
    de: 'Neueste Nachrichten und Analysen zu den AktivitÃ¤ten des EuropÃ¤ischen Parlaments',
    fr: 'DerniÃ¨res nouvelles et analyses sur les activitÃ©s du Parlement europÃ©en',
    es: 'Ãšltimas noticias y anÃ¡lisis sobre las actividades del Parlamento Europeo',
    it: 'Ultime notizie e analisi sulle attivitÃ  del Parlamento europeo',
    nl: 'Laatste nieuws en analyses over activiteiten van het Europees Parlement',
    pl: 'Najnowsze wiadomoÅ›ci i analizy dotyczÄ…ce dziaÅ‚aÅ„ Parlamentu Europejskiego',
    pt: 'Ãšltimas notÃ­cias e anÃ¡lises sobre as atividades do Parlamento Europeu',
    ro: 'Ultimele È™tiri È™i analize despre activitÄƒÈ›ile Parlamentului European',
    sv: 'Senaste nyheterna och analyser om Europaparlamentets verksamhet',
    da: 'Seneste nyheder og analyser om Europa-Parlamentets aktiviteter',
    fi: 'ViimeisimmÃ¤t uutiset ja analyysit Euroopan parlamentin toiminnasta',
    el: 'Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± Î½Î­Î± ÎºÎ±Î¹ Î±Î½Î±Î»ÏÏƒÎµÎ¹Ï‚ Î³Î¹Î± Ï„Î¹Ï‚ Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚ Ï„Î¿Ï… Î•Ï…ÏÏ‰Ï€Î±ÏŠÎºÎ¿Ï ÎšÎ¿Î¹Î½Î¿Î²Î¿Ï…Î»Î¯Î¿Ï…',
    hu: 'Legfrissebb hÃ­rek Ã©s elemzÃ©sek az EurÃ³pai Parlament tevÃ©kenysÃ©geirÅ‘l',
  };

  const headings = {
    en: 'Latest News',
    de: 'Neueste Nachrichten',
    fr: 'DerniÃ¨res ActualitÃ©s',
    es: 'Ãšltimas Noticias',
    it: 'Ultime Notizie',
    nl: 'Laatste Nieuws',
    pl: 'Najnowsze WiadomoÅ›ci',
    pt: 'Ãšltimas NotÃ­cias',
    ro: 'Ultimele È˜tiri',
    sv: 'Senaste Nyheterna',
    da: 'Seneste Nyheder',
    fi: 'ViimeisimmÃ¤t Uutiset',
    el: 'Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± ÎÎ­Î±',
    hu: 'Legfrissebb HÃ­rek',
  };

  const noArticles = {
    en: 'No articles available yet.',
    de: 'Noch keine Artikel verfÃ¼gbar.',
    fr: 'Aucun article disponible pour le moment.',
    es: 'AÃºn no hay artÃ­culos disponibles.',
    it: 'Nessun articolo disponibile al momento.',
    nl: 'Nog geen artikelen beschikbaar.',
    pl: 'Nie ma jeszcze dostÄ™pnych artykuÅ‚Ã³w.',
    pt: 'Ainda nÃ£o hÃ¡ artigos disponÃ­veis.',
    ro: 'Nu sunt Ã®ncÄƒ articole disponibile.',
    sv: 'Inga artiklar tillgÃ¤ngliga Ã¤nnu.',
    da: 'Ingen artikler tilgÃ¦ngelige endnu.',
    fi: 'Ei vielÃ¤ saatavilla olevia artikkeleita.',
    el: 'Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î±ÎºÏŒÎ¼Î± Î´Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î± Î¬ÏÎ¸ÏÎ±.',
    hu: 'MÃ©g nincsenek elÃ©rhetÅ‘ cikkek.',
  };

  const title = titles[lang] || titles.en;
  const description = descriptions[lang] || descriptions.en;
  const heading = headings[lang] || headings.en;
  const noArticlesText = noArticles[lang] || noArticles.en;
  const languageName = langNames[lang] || 'English';

  const dir = lang === 'ar' || lang === 'he' ? 'rtl' : 'ltr';

  return `&lt;!DOCTYPE html>
&lt;html lang="${lang}" dir="${dir}">
&lt;head>
  &lt;meta charset="UTF-8">
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0">
  &lt;title>${title}&lt;/title>
  &lt;meta name="description" content="${description}">
  &lt;link rel="stylesheet" href="styles.css">
&lt;/head>
&lt;body>
  &lt;header>
    &lt;h1>${title}&lt;/h1>
    &lt;p class="language-indicator">${languageName}&lt;/p>
  &lt;/header>
  
  &lt;main>
    &lt;section class="news-list">
      &lt;h2>${heading}&lt;/h2>
      ${
        articles.length === 0
          ? `&lt;p>${noArticlesText}&lt;/p>`
          : `
      &lt;ul class="article-list">
        ${articles
          .map(
            (article) => `
        &lt;li class="article-item">
          &lt;a href="news/${article.filename}">
            &lt;span class="article-date">${article.date}&lt;/span>
            &lt;span class="article-title">${formatSlug(article.slug)}&lt;/span>
          &lt;/a>
        &lt;/li>
        `
          )
          .join('\n        ')}
      &lt;/ul>
      `
      }
    &lt;/section>
  &lt;/main>
  
  &lt;footer>
    &lt;p>&amp;copy; ${new Date().getFullYear()} EU Parliament Monitor&lt;/p>
  &lt;/footer>
&lt;/body>
&lt;/html>`;
}

/**
 * Format slug for display
 * @param {string} slug - Article slug
 * @returns {string} Formatted title
 */
function formatSlug(slug) {
  return slug
    .split('-')
    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
    .join(' ');
}

/**
 * Main execution
 */
function main() {
  console.log('ðŸ“° Generating news indexes...');

  const articles = getNewsArticles();
  console.log(`ðŸ“Š Found ${articles.length} articles`);

  const grouped = groupArticlesByLanguage(articles);

  let generated = 0;
  for (const lang of ALL_LANGUAGES) {
    const langArticles = grouped[lang] || [];
    const html = generateIndexHTML(lang, langArticles);
    const filename = `index-${lang}.html`;
    const filepath = path.join(__dirname, '..', filename);

    fs.writeFileSync(filepath, html, 'utf-8');
    console.log(`  âœ… Generated ${filename} (${langArticles.length} articles)`);
    generated++;
  }

  console.log(`âœ… Generated ${generated} index files`);
}

main();
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.5</a> on Wed Feb 18 2026 01:10:16 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
